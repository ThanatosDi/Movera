#!/bin/bash

URL="$1"
FILE_PATH="$2"
CATEGORY="$3"
TAGS="$4"

# Validate URL exists and starts with http:// or https://
if [[ -z "$URL" ]]; then
  echo "Error: URL is missing." >&2
  exit 1
fi

if [[ ! "$URL" =~ ^https?:// ]]; then
  echo "Error: URL must start with http:// or https://" >&2
  exit 1
fi

curl -X POST "$URL" \
  -H "Content-Type: application/json" \
  -d "{\"filepath\": \"$FILE_PATH\", \"category\": \"$CATEGORY\", tags: \"$TAGS\"}"
